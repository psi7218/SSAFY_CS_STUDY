# 📌 패키지 매니저 & 모노레포

## **1️⃣ 패키지 매니저 (Package Manager)**  
- 외부 라이브러리(패키지)를 **설치, 관리, 업데이트, 삭제**하는 도구  
- 오픈소스 라이브러리를 **편리하게 설치하고 유지보수** 가능  
- 주요 패키지 매니저  
  - **npm**: Node.js 기본 패키지 매니저  
  - **Yarn**: npm 대체, 더 빠른 의존성 관리  
  - **pnpm**: 중복 설치 방지, 빠른 패키지 설치  

<br/>
<br/>
<br/>

## **2️⃣ 모노레포 (Monorepo)란?**  
- **하나의 저장소(Repo)에서 여러 프로젝트를 관리하는 방식**  
- 개별 저장소를 사용하는 멀티레포(Multi-Repo)와 대비됨  

### - **모노레포의 기본 원리**
1. 여러 개의 프로젝트를 하나의 Git 저장소에서 관리  
2. 공통 코드(UI, 유틸리티 함수 등)를 공유 → 한 번의 수정으로 모든 프로젝트에 반영  
3. 일관된 버전 관리, 의존성 관리, 배포 전략 적용 가능 


### 📂 Monorepo 프로젝트 구조
```
📂 monorepo-project/
├── 📂 apps/             # 여러 개의 애플리케이션 (프론트엔드, 백엔드 등)
│   ├── 📂 frontend/    # React/Next.js 등의 프론트엔드 애플리케이션
│   ├── 📂 backend/     # Express/NestJS 등의 백엔드 애플리케이션
│   ├── 📂 admin-dashboard/  # 관리자 대시보드 앱
│
├── 📂 packages/         # 공통으로 사용되는 패키지 (라이브러리, 유틸리티 등)
│   ├── 📂 ui-library/  # 공통 UI 컴포넌트 라이브러리
│   ├── 📂 utils/       # 공통 유틸리티 함수 모음
│   ├── 📂 hooks/       # React hooks 모음
│
├── package.json        # 최상위 패키지 관리
├── turbo.json / nx.json  # 모노레포 빌드 및 실행 최적화 설정
├── yarn.lock / pnpm-lock.yaml  # 패키지 매니저 Lock 파일
└── README.md           # 프로젝트 설명 문서

```


### - **모노레포 vs. 멀티레포**
| 구분          | 모노레포 (Monorepo) | 멀티레포 (Multi-Repo) |
|--------------|------------------|------------------|
| **저장소 개수** | 하나의 저장소에서 모든 프로젝트 관리 | 각 프로젝트별 개별 저장소 |
| **코드 재사용** | 공통 모듈 및 라이브러리 공유 용이 | 코드 공유가 어렵고 중복 발생 가능 |
| **버전 관리** | 프로젝트 간 버전 충돌 최소화 | 개별 저장소마다 버전 관리 필요 |
| **협업 방식** | 여러 팀이 하나의 저장소에서 협업 가능 | 프로젝트마다 별도의 협업 방식 필요 |


<br/>
<br/>
<br/>

## **3️⃣ 모노레포의 필요성**
### **- 코드 관리 & 유지보수 용이**
- 모든 프로젝트에서 동일한 개발 환경 유지  
- **ESLint, Prettier, Husky** 등의 일관된 코드 스타일 적용  
- **공통 UI 컴포넌트, 유틸리티 함수 공유**로 중복 코드 제거  

### **- 대규모 변경 적용 용이**
- 리팩토링 시 **한 번의 수정으로 모든 프로젝트에 반영 가능**  
- 디자인 시스템을 통해 **일관된 스타일 유지**  

### **- 최적화된 버전 및 의존성 관리**
- `pnpm`, `yarn workspaces`, `Nx` 등의 도구 활용  
- **버전 충돌 방지 및 유지보수 간소화**  

### **- 협업 효율성 증가**
- 코드 변경 사항을 **빠르게 공유 및 적용** 가능  
- **CI/CD 파이프라인 통합 운영 가능**  

<br/>
<br/>
<br/>

## **4️⃣ 모노레포 구축을 도와주는 다양한 도구**
| 도구 | 특징 |
| --- | --- |
| **Nx** | 빌드 속도 최적화, 캐싱 지원, 대규모 모노레포에 최적화 |
| **Turborepo** | 고급 캐싱 및 속도 최적화, Vercel에서 개발 |
| **Yarn** | 패키지 의존성 최적화, Node.js 생태계에서 많이 사용 |
| **pnpm** | 빠른 패키지 설치 및 의존성 관리 최적화 |
| **Lerna** | 패키지 배포 및 버전 관리에 활용 (현재는 `Nx`가 대체) |

<br/>

### 📌 **Yarn**
- **모노레포에서 여러 패키지를 효율적으로 관리**  
- **중복 설치 최소화** 및 **공통 의존성 공유**  


**- 주요 기능**  
- 모든 패키지를 한 번에 설치 (`yarn install`)  
- 공통 의존성 공유 (Hoisting) → `node_modules`에서 공유  
- 각 패키지별 실행 (`yarn workspace <패키지명> <명령어>`)  

**- 장점**  
- 의존성 중복 제거 및 최적화**
- 빠른 설치 속도
- 각 패키지별 개별 실행 가능

**- 단점**  
- 캐시 문제 발생 가능 → `yarn cache clean` 필요  
- 모든 패키지를 한꺼번에 업데이트 시 충돌 가능성 존재 


<br/>

### 📌 **pnpm**
- 빠른 패키지 설치 및 디스크 공간 절약
- 중복된 패키지를 전역 저장소(`~/.pnpm-store`)에 한 번만 저장


**- 주요 기능**  
- 중복 설치 방지 (`hard link` 방식 사용)  
- 모든 패키지를 한 번에 설치 (`pnpm install`)  
- 각 패키지별 실행 (`pnpm --filter <패키지명> run <명령어>`)  

**- 장점**  
- 설치 속도 빠름 (전역 저장소 캐싱)  
- 디스크 공간 절약 (하드 링크 사용)  
- 의존성 충돌 최소화  

**- 단점**  
- Hoisting(공통 패키지 공유)이 기본 비활성화됨 → `--shamefully-hoist` 옵션 필요  
- 일부 패키지와 호환성 문제가 발생할 수 있음  


<br/>
<br/>
<br/>


추가 링크
  - ​Monorepo.tools : https://monorepo.tools/#monorepo-features
  - 모노레포 인사이트 : https://medium.com/ekino-france/monorepo-insights-nx-pnpm-and-turborepo-1-4-cf7e792a87da